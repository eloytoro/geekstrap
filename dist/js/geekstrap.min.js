angular.module("fg.geekstrap",["ngAnimate"]),angular.module("fg.geekstrap").directive("sidebar",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"geekstrap/directives/sidebar/sidebar.html",scope:{icon:"@","default":"=",persist:"="},controller:["$scope",function(t){this.items=[],t.offset={},this.setActive=function(e){if(t.persist)for(var n in this.items)this.items[n].active=n==e,this.items[n].$digest()},this.addItem=function(e){var n=this.items.length;return this.items.push(e),e.active=n==t.default,n}}],link:function(t,e){e.children().eq(0).on("mouseenter",function(){t.show||(t.peek=!0,t.offset.left="-250px",t.$digest())}),e.children().eq(1).on("mouseenter",function(){t.show=!0,t.offset.left="0px",t.$digest()}),e.on("mouseleave",function(){t.peek=!1,t.show=!1,t.offset.left="-305px",t.$digest()})}}}).directive("sidebarItem",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{icon:"@"},templateUrl:"geekstrap/directives/sidebar/sidebar-item.html",require:"^sidebar",link:function(t,e,n,s){t.index=s.addItem(t),e.on("click",function(){t.active?t.active=!1:s.setActive(t.index)})}}}),angular.module("fg.geekstrap").directive("progressButton",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"geekstrap/directives/progress-button/progress-button.html",scope:{model:"=",onload:"&"},controller:["$scope","$interval","$timeout",function(t,e,n){var s=this;t.isLoading=!1,t.isFinishing=!1,t.loadingBar={width:"0px"},this.stopProgress=function(){n(function(){t.model=-1},300),t.onload()},t.$watch("model",function(e){t.isLoading=e>=0,t.loadingBar.width=e+"%",e>=100&&s.stopProgress()})}],link:function(){}}}),angular.module("fg.geekstrap").directive("navbar",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"geekstrap/directives/navbar/navbar.html",scope:{"default":"@",alias:"=?"},controller:["$scope","$window",function(t,e){this.tabs=[];var n=this;t.caretOffset={},t.activeTab=0,this.moveCaret=function(e){for(var n=0,s=0;e>s;s++)n+=this.tabs[s].width;t.caretOffset.left=n+"px",t.caretOffset.width=this.tabs[e].width+"px"},this.setActive=function(e){for(var n in this.tabs)this.tabs[n].active=e==n,this.tabs[n].$apply();t.activeTab=e,this.moveCaret(e),t.$apply()},this.addTab=function(t){var e=this.tabs.length;return this.tabs[e]=t,e},angular.element(e).bind("resize",function(){for(var e in n.tabs)n.tabs[e].refresh();n.moveCaret(t.activeTab),t.$apply()}),this.exports={setActive:this.setActive}}],link:function(t,e,n,s){for(var i=0;i<s.tabs.length;i++)if(s.tabs[i].link==t.default){s.tabs[i].active=!0,t.activeTab=i,s.moveCaret(i);break}t.alias&&(t.alias=s.exports)}}}).directive("navbarTab",function(){return{restrict:"E",require:"^navbar",replace:!0,transclude:!0,templateUrl:"geekstrap/directives/navbar/navbar-tab.html",scope:{link:"@",activable:"=?"},link:function(t,e,n,s){t.width=e[0].offsetWidth,t.id=s.addTab(t),t.activable&&e.on("click",function(){s.setActive(t.id)}),t.refresh=function(){t.width=e[0].offsetWidth}}}}),angular.module("fg.geekstrap").directive("circularScroller",["$compile",function(t){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"geekstrap/directives/circular-scroller/circular-scroller.html",scope:{scroll:"=?",alias:"=?"},controller:["$scope","$element","$window","$timeout","$compile",function(t,e,n,s){function i(e){l+=e[0].offsetWidth,e.addClass("fg-cscroller-element"),t.boxStyle.width=l+"px"}var r,a=this,l=0,o=e[0].getElementsByClassName("fg-cscroller-box")[0],c=0,d=0,p=0;this.shown=[],this.children=[],this.exports={},t.boxStyle={},t.scroll||(t.scroll=0),this.append=function(e){return function(){a.children[d](t.$parent,e)}}(function(t){d=(d+1)%a.children.length,a.shown.push(t),o.appendChild(t[0]),i(t)}),this.prepend=function(e){return function(){a.children[a.children.length-p-1](t.$parent,e)}}(function(e){p=(p+1)%a.children.length,a.shown.unshift(e),o.insertBefore(e[0],o.firstChild),i(e),c+=e[0].offsetWidth,t.boxStyle.left=-c+"px"}),this.pop=function(){var t=a.shown.pop()[0];d=(d-1+a.children.length)%a.children.length,l-=t.offsetWidth,o.removeChild(t)},this.shift=function(){var e=a.shown.shift()[0];l-=e.offsetWidth,p=(p-1+a.children.length)%a.children.length,c-=e.offsetWidth,t.boxStyle.left=-c+"px",o.removeChild(e)},this.build=function(){for(var n=e[0].offsetWidth;n>l-c+t.scroll;)a.append();for(;c-t.scroll<0;)a.prepend();t.boxStyle.width=l+"px",t.boxStyle["margin-left"]=t.scroll+"px",r&&s.cancel(r),r=s(a.cleanup,1e3)},this.cleanup=function(){for(var n=e[0].offsetWidth;n+a.shown[a.shown.length-1][0].offsetWidth<l-c+t.scroll;)a.pop();for(;c-t.scroll>a.shown[0][0].offsetWidth;)a.shift();t.boxStyle.width=l+"px"},this.exports.transposeLeft=function(e){if(e>0){for(var n=c,s=0;e>s;s++)a.prepend();t.scroll+=c-n}else{var i=0;e=Math.abs(e);for(var r=0;e>r;r++)i+=a.shown[r][0].offsetWidth;t.scroll-=i}},this.exports.transposeRight=function(e){if(e>0){for(var n=0,s=1;e>=s;s++)n+=a.shown[a.shown.length-s][0].offsetWidth;t.scroll-=n}else{var i=l;e=Math.abs(e);for(var r=0;e>r;r++)a.append();t.scroll+=l-i}},angular.element(n).bind("resize",function(){a.build(),t.$apply()})}],link:function(e,n,s,i,r){r(e.$parent,function(e){for(var n=0;n<e.length;n++)e[n]instanceof Element&&i.children.push(t(e[n]))}),e.$watch("scroll",function(){i.build()}),e.alias&&(e.alias=i.exports)}}}]),angular.module("fg.geekstrap").directive("alert",function(){return{restrict:"E",replace:!0,templateUrl:"geekstrap/directives/alert/alert.html",scope:{cluster:"=model"},controller:["$scope","$timeout",function(t){t.visible=!1,this.destroy=function(e){t.cluster.splice(e,1)}}],controllerAs:"controller",link:function(){}}}),angular.module("fg.geekstrap").provider("Modal",function(){var t=function(t,e){this.templateUrl=e.templateUrl,this.title=e.title,this.name=t},e=[];this.modal=function(n,s){e[n]=new t(n,s)},this.wrapperTemplateUrl="geekstrap/templates/modal.html",this.$get=["$document","$compile","$rootScope","$http","$templateCache","$q",function(n,s,i,r,a){var l,o,c=i.$new();return r({method:"GET",cache:a,url:this.wrapperTemplateUrl,type:"text/html"}).success(function(t){l=angular.element(t),l.find("[ng-transclude]").removeAttr("ng-transclude").addClass("fg-modal-transclude"),s(l)(c,function(t){l=t,n.find("body").append(l)})}),c.close=function(){o.dismiss()},c.save=function(){o.accept()},t.prototype.on=function(t,e){return i.$on("modal:"+this.name+":"+t,e),this},t.prototype.pop=function(t){if("Object"===t.constructor.name){var e=i.$new();t.forEach(function(t,n){e[n]=t}),t=e}var n=this;return r({method:"GET",cache:a,url:this.templateUrl,type:"text/html"}).success(function(e){s(e)(t,function(t){l.find(".panel-body").html(t),c.show=!0,c.title=n.title,o=n,i.$broadcast("modal:"+this.name+":open")})}),this},t.prototype.dismiss=function(){i.$broadcast("modal:"+this.name+":close"),c.show=!1},t.prototype.accept=function(){i.$broadcast("modal:"+this.name+":save")},function(t){return t?e[t]:o}}]}),angular.module("fg.geekstrap").run(["$templateCache",function(t){t.put("geekstrap/templates/modal.html",'<div class="fg-modal-wrapper ng-hide" ng-show="show">\n    <div class="panel panel-default">\n        <div class="panel-heading">\n            <button type="button" class="close fa fa-times-circle" ng-click="close()">\n            </button>\n            <h4 class="panel-title" ng-bind="title"></h4>\n        </div>\n        <div class="panel-body" ng-transclude></div>\n        <div class="panel-footer">\n            <button type="button" class="btn btn-default"\n                ng-click="close()">Cerrar</button>\n            <button type="button" class="btn btn-primary"\n                ng-click="save()">\n                Ok\n            </button>\n        </div>\n    </div>\n</div>\n'),t.put("geekstrap/directives/alert/alert.html",'<div class="alert alert-dismissible {{alert.class}}" role="alert" ng-repeat="alert in cluster" ng-click="controller.destroy($index)">\n    <button type="button" class="close"><span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span></button>\n    <span>{{alert.text}}</span>\n</div>\n'),t.put("geekstrap/directives/circular-scroller/circular-scroller.html",'<div class="fg-cscroller-wrapper">\n    <div class="fg-cscroller-box" ng-style="boxStyle">\n    </div>\n</div>\n'),t.put("geekstrap/directives/navbar/navbar-tab.html",'<div class="fg-navbar-tab" ng-transclude ng-class="{active: active}">\n</div>\n'),t.put("geekstrap/directives/navbar/navbar.html",'<div class="fg-navbar">\n    <div ng-transclude></div>\n    <div class="fg-navbar-caret" ng-style="caretOffset"></div>\n</div>\n'),t.put("geekstrap/directives/progress-button/progress-button.html",'<button class="progress-button" ng-class="{loading: isLoading}">\n    <div class="content" ng-transclude></div>\n    <div class="progress-button-bar" ng-style="loadingBar"></div>\n</button>\n'),t.put("geekstrap/directives/sidebar/sidebar-item.html",'<div class="sidebar-item" ng-class="{active: active}">\n    <div class="sidebar-item-label" ng-transclude>\n    </div>\n    <div class="sidebar-item-icon">\n        <span class="{{icon}}"></span>\n    </div>\n</div>\n'),t.put("geekstrap/directives/sidebar/sidebar.html",'<div class="sidebar">\n    <div class="sidebar-toggle">\n        <span class="{{icon}}"></span>\n    </div>\n    <div class="sidebar-content" ng-transclude ng-style="offset"></div>\n</div>\n')}]);